{% load i18n %}
{% load display_tags %}
{% load image_tags %}
{% load reviews_tags %}
{% load static %}
{% load purchase_info_tags %}

{% purchase_info_for_product request product as session %}
    
{% block product %}
<div class="col-6 col-md-4 col-lg-3">
  <div class="product-card">
    {% block product_image %}
    <div class="product-image">
      {% with image=product.primary_image %}
        {% oscar_thumbnail image.original "x400" upscale=False as thumb %}
        <a href="{{ product.get_absolute_url }}">
          <img src="{{ thumb.url }}" alt="{{ product.get_title }}" class="main-image">
          <img src="{{ thumb.url }}" alt="{{ product.get_title }}" class="hover-image">
        </a>
      {% endwith %}
      <div class="product-overlay"></div>
      <div class="product-actions">
        <button class="action-btn" type="button" aria-label="Add to wishlist">
          <i class="bi bi-heart"></i>
        </button>
        <button class="action-btn" type="button" aria-label="Quick view">
          <i class="bi bi-eye"></i>
        </button>
      </div>
    </div>
    {% endblock %}
    
    <div class="product-details">
      {% block product_title %}
      <h3 class="product-title">
        <a href="{{ product.get_absolute_url }}">{{ product.get_title|truncatewords:6 }}</a>
      </h3>
      {% endblock %}

      {% block product_price %}
      <div class="product-meta">
        <div class="product-price">
          {% include "oscar/catalogue/partials/stock_record.html" %}
        </div>
      </div>
      {% endblock %}
    </div>
  </div>
</div>
{% endblock %}
